{"version":3,"sources":["bt/behaviors/LookAt.js"],"names":[],"mappings":";;;;;;AAAA,yBAAqB,aAAa,CAAC,CAAA;AACnC,uBAAmB,WAAW,CAAC,CAAA;AAC/B,wBAAoB,eAAe,CAAC,CAAA;AACpC,oCAAoB,qBAAqB,CAAC,CAAA;AAE1C;;;;;;;GAOG;AAEH;;;;;;;;;;;;;;GAcG;AACH;IAAoC,0BAAQ;IACxC,gBAAY,OAAO;QACf,kBAAM,OAAO,EAAE;YACX,YAAY,EAAE,KAAK;SACtB,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,GAAG,IAAI,2BAAK,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAM,GAAG,gBAAM,CAAC,OAAO,CAAC;IACjC,CAAC;IACD,sBAAK,GAAL;QACI,IAAI,CAAC,MAAM,GAAG,gBAAM,CAAC,WAAW,CAAC;QACjC,IAAI,CAAC,OAAO,GAAG,iBAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,mBAAmB,EAAE,CAAC;QAC9D,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAC1D,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;YACpC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACtC,CAAC;QAED,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;QACtC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;QAChD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC9D,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,0BAAS,GAAT;QACI,IAAI,CAAC,MAAM,GAAG,gBAAM,CAAC,SAAS,CAAC;IACnC,CAAC;IAED,qBAAI,GAAJ;QACI,EAAE,CAAA,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;YACrB,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;QAC/B,CAAC;IACL,CAAC;IAED,uBAAM,GAAN;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,cAAc,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC;YACnE,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;YACtC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;YAChD,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACpD,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IACL,aAAC;AAAD,CA1CA,AA0CC,CA1CmC,kBAAQ,GA0C3C;AA1CD;wBA0CC,CAAA","file":"bt/behaviors/LookAt.js","sourcesContent":["import Behavior from '../Behavior';\nimport Status from '../Status';\nimport Runtime from '../../Runtime';\nimport {THREE} from 'animation-utilities';\n\n/**\n * @class Point3D\n * @memberof module:jibo/bt/behaviors\n * @description Defines a point in 3D space.\n * @prop {number} x The forward-facing vector in Jibo's coordinate frame (meters).\n * @prop {number} y The left-facing vector in Jibo's coordinate frame (meters).\n * @prop {number} z The up-facing vector in Jibo's coordinate frame (meters).\n */\n\n/**\n * @class LookAt\n * @extends module:jibo/bt.Behavior\n * @memberof module:jibo/bt/behaviors\n * @description Makes Jibo look at a 3D point in space.\n *              `LookAt` has two modes. In single-shot mode, this behavior makes Jibo look at the 3D point returned\n *              by `getTarget` and succeeds when Jibo reaches his this target. In continuous mode, `getTarget` is\n *              called every frame, and this behavior will remain in progress indefinitely until explicitly stopped by a\n *              parent bahevior or a decorator.\n * @param {Object} options See {@link module:jibo/bt.Behavior|Behavior} for all options.\n * @param {Function} options.getTarget Returns a {@link module:jibo/bt/behaviors.Point3D} object.\n * @param {boolean} [options.isContinuous=false] `true` if this behavior is in continous-mode. `false` if in single-shot look-at.\n * @param {Function} options.config Called and passed a {@link LookatBuilder} object for configuration purposes. Do not call\n *                          {@link LookatBuilder#startLookat}. This is called automatically by the behavior.\n */\nexport default class LookAt extends Behavior {\n    constructor(options) {\n        super(options, {\n            isContinuous: false\n        });\n        this.threeVec = new THREE.Vector3(0, 0, 0);\n        this.status = Status.INVALID;\n    }\n    start() {\n        this.status = Status.IN_PROGRESS;\n        this.builder = Runtime.instance.animate.createLookatBuilder();\n        this.onStoppedBind = this.onStopped.bind(this);\n        this.builder.on('STOPPED', this.onStoppedBind);\n        this.builder.setContinuousMode(this.options.isContinuous);\n        if (this.options.config !== undefined) {\n            this.options.config(this.builder);\n        }\n\n        let target = this.options.getTarget();\n        this.threeVec.set(target.x, target.y, target.z);\n        this.lookAtInstance = this.builder.startLookat(this.threeVec);\n        return true;\n    }\n\n    onStopped(/*event*/) {\n        this.status = Status.SUCCEEDED;\n    }\n\n    stop() {\n        if(this.lookAtInstance) {\n            this.lookAtInstance.stop();\n        }\n    }\n\n    update() {\n        if (this.options.isContinuous && (this.lookAtInstance !== undefined)) {\n            let target = this.options.getTarget();\n            this.threeVec.set(target.x, target.y, target.z);\n            this.lookAtInstance.updateTarget(this.threeVec);\n        }\n        return this.status;\n    }\n}"],"sourceRoot":"/source/"}