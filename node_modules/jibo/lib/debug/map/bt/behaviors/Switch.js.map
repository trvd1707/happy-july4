{"version":3,"sources":["bt/behaviors/Switch.js"],"names":[],"mappings":";;;;;;AAAA,+BAA2B,mBAAmB,CAAC,CAAA;AAC/C,uBAAmB,WAAW,CAAC,CAAA;AAE/B;;;;;;;;GAQG;AACH;IAAoC,0BAAc;IACjD,gBAAY,OAAO;QAClB,kBAAM,OAAO,CAAC,CAAC;QACf,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;IACnB,CAAC;IACD,sBAAK,GAAL;QACC,EAAE,CAAA,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAC/B,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QACD,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QACjB,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;IACzB,CAAC;IACD,0BAAS,GAAT;QACC,IAAI,OAAO,GAAG,KAAK,CAAC;QACpB,OAAM,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YACvD,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC;YAC/C,EAAE,CAAA,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACb,IAAI,CAAC,OAAO,EAAE,CAAC;YAChB,CAAC;QACF,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IACD,qBAAI,GAAJ;QACC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;IACnB,CAAC;IACD,uBAAM,GAAN;QACC,EAAE,CAAA,CAAC,IAAI,CAAC,OAAO,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;YAC/D,IAAI,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,CAAC;YACxD,EAAE,CAAA,CAAC,WAAW,KAAK,gBAAM,CAAC,MAAM,CAAC,CAAC,CAAC;gBAClC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACf,EAAE,CAAA,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;oBAC9D,MAAM,CAAC,gBAAM,CAAC,SAAS,CAAC;gBACzB,CAAC;gBACD,IAAI,CAAC,CAAC;oBACL,MAAM,CAAC,gBAAM,CAAC,WAAW,CAAC;gBAC3B,CAAC;YACF,CAAC;YACD,IAAI,CAAC,EAAE,CAAA,CAAC,WAAW,KAAK,gBAAM,CAAC,MAAM,CAAC,CAAC,CAAC;gBACvC,MAAM,CAAC,gBAAM,CAAC,WAAW,CAAC;YAC3B,CAAC;YACD,MAAM,CAAC,WAAW,CAAC;QACpB,CAAC;QACD,MAAM,CAAC,gBAAM,CAAC,SAAS,CAAC;IACzB,CAAC;IACF,aAAC;AAAD,CA5CA,AA4CC,CA5CmC,wBAAc,GA4CjD;AA5CD;wBA4CC,CAAA","file":"bt/behaviors/Switch.js","sourcesContent":["import ParentBehavior from '../ParentBehavior';\nimport Status from '../Status';\n\n/**\n * @class Switch\n * @extends module:jibo/bt.ParentBehavior\n * @memberof module:jibo/bt/behaviors\n * @description Runs its child nodes in sequence until one succeeds. Fails if all of the children failed\n * and succeeds if one child succeeded.\n * @param {Object} options See {@link module:jibo/bt.Behavior|Behavior} for all options.\n * @param {Array<module:jibo/bt.Behavior>} [options.children=[]] - An array of the Switch's child behaviors.\n */\nexport default class Switch extends ParentBehavior {\n\tconstructor(options) {\n\t\tsuper(options);\n\t\tthis.current = -1;\n\t}\n\tstart() {\n\t\tif(this.children.length === 0) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.current = 0;\n\t\treturn this.findStart();\n\t}\n\tfindStart() {\n\t\tvar startOk = false;\n\t\twhile(!startOk && this.current < this.children.length) {\n\t\t\tstartOk = this.children[this.current]._start();\n\t\t\tif(!startOk) {\n\t\t\t\tthis.current++;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\tstop() {\n\t\tthis.current = -1;\n\t}\n\tupdate() {\n\t\tif(this.current !== -1 && this.current < this.children.length) {\n\t\t\tvar childStatus = this.children[this.current]._update();\n\t\t\tif(childStatus === Status.FAILED) {\n\t\t\t\tthis.current++;\n\t\t\t\tif(this.current >= this.children.length || !this.findStart()) {\n\t\t\t\t\treturn Status.SUCCEEDED;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn Status.IN_PROGRESS;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(childStatus === Status.PAUSED) {\n\t\t\t\treturn Status.IN_PROGRESS;\n\t\t\t}\n\t\t\treturn childStatus;\n\t\t}\n\t\treturn Status.SUCCEEDED;\n\t}\n}"],"sourceRoot":"/source/"}