{"version":3,"sources":["bt/behaviors/Parallel.js"],"names":[],"mappings":"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","file":"bt/behaviors/Parallel.js","sourcesContent":["import ParentBehavior from '../ParentBehavior';\nimport Status from '../Status';\n\n/**\n * @class Parallel\n * @extends module:jibo/bt.ParentBehavior\n * @memberof module:jibo/bt/behaviors\n * @description Runs its child nodes in parallel. Returns with Status.FAILED if one of the children failed\n * and Status.SUCCEEDED if all children succeeded.\n * @param {Object} options See {@link module:jibo/bt.Behavior|Behavior} for all options.\n * @param {Function} options.succeedOnOne\n * @param {Array<module:jibo/bt.Behavior>} [options.children=[]] - An array of the Parallel's child behaviors.\n */\nexport default class Parallel extends ParentBehavior {\n\tstart() {\n\t\tif(this.children.length === 0) {\n\t\t\treturn false;\n\t\t}\n\t\tvar oneFailedToStart = false;\n\t\tthis.runChildren = [];\n\t\tfor(let i = 0; i < this.children.length; i++) {\n\t\t\tvar child = this.children[i];\n\t\t\tif(child._start()) {\n\t\t\t\tthis.runChildren.push(child);\n\t\t\t}\n\t\t\telse {\n\t\t\t\toneFailedToStart = true;\n\t\t\t}\n\t\t}\n\t\tthis.activeChildren = this.runChildren.length;\n\t\tif(oneFailedToStart) {\n\t\t\tfor(let i=0; i<this.runChildren.length; i++) {\n\t\t\t\tthis.runChildren[i]._stop();\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\tstop() {\n\t\tfor(var i=0; i<this.runChildren.length; i++) {\n\t\t\tif (!this.runChildren[i]) continue;\n\t\t\tthis.runChildren[i]._stop();\n\t\t}\n\t}\n\tupdate() {\n\t\tvar oneFailed = false;\n\t\tfor(var i=0; i<this.runChildren.length; i++) {\n\t\t\tif (!this.runChildren[i]) continue;\n\n\t\t\tvar child = this.runChildren[i];\n\t\t\tvar status = child._update();\n\n\t\t\tif(status === Status.SUCCEEDED) {\n\t\t\t\tif(this.options.succeedOnOne) {\n\t\t\t\t\t// Stop all children\n\t\t\t\t\tthis._stop();\n\t\t\t\t\treturn Status.SUCCEEDED;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tchild._stop(); // Stop current child\n\t\t\t\t\tdelete this.runChildren[i];\n\t\t\t\t\tthis.activeChildren--;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(status === Status.FAILED) {\n\t\t\t\toneFailed = true;\n\t\t\t}\n\t\t\telse if(status === Status.PAUSED) {\n\t\t\t\treturn Status.IN_PROGRESS;\n\t\t\t}\n\t\t}\n\n\t\tif(oneFailed) {\n\t\t\treturn Status.FAILED;\n\t\t}\n\t\telse if(this.activeChildren === 0) {\n\t\t\treturn Status.SUCCEEDED;\n\t\t}\n\t\telse {\n\t\t\treturn Status.IN_PROGRESS;\n\t\t}\n\t}\n}"],"sourceRoot":"/source/"}