{"version":3,"sources":["ifr-motion/loaders/AnimationLoader.js"],"names":[],"mappings":"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","file":"ifr-motion/loaders/AnimationLoader.js","sourcesContent":["/**\n * @author mattb\n * Copyright 2015 IF Robots LLC\n */\n\n\"use strict\";\n\nvar TimestampedBuffer = require(\"../base/TimestampedBuffer\");\nvar MotionTrack = require(\"../base/MotionTrack\");\nvar Motion = require(\"../base/Motion\");\nvar MotionEvent = require(\"../base/MotionEvent\");\nvar FileTools = require(\"../../ifr-core/FileTools\");\nvar slog = require(\"../../ifr-core/SLog\");\n\nvar channel = \"MODEL_LOADING\";\n\n\n/**\n * @constructor\n */\nvar AnimationLoadResult = function()\n{\n\t/** @type {string} */\n\tthis.url = null;\n\t/** @type {!boolean} */\n\tthis.success = false;\n\t/** @type {string} */\n\tthis.message = \"\";\n\n\t/** @type {Motion} */\n\tthis.motion = null;\n\t/** @type {Array.<string>} */\n\tthis.defaultDOFNames = null;\n\t/** @type {Object.<string, Object.<number, string>>} */\n\tthis.enumMaps = null;\n\t/** @type {MotionEvent[]} */\n\tthis.events = null;\n};\n\n/**\n * @constructor\n */\nvar AnimationLoader = function()\n{\n\t/** @type {AnimationLoadResult} */\n\tthis._result = null;\n\t/** @type {boolean} */\n\tthis.flattenEnums = true;\n\t/** @type {boolean} */\n\tthis.resolvePaths = true;\n};\n\n/**\n * @return {AnimationLoadResult}\n */\nAnimationLoader.prototype.getResult = function()\n{\n\treturn this._result;\n};\n\n/**\n * @param {string} url\n * @param callback\n */\nAnimationLoader.prototype.load = function(url, callback)\n{\n\tvar self = this;\n\tFileTools.loadJSON(url, function(error, data)\n\t{\n\t\tif (error === null)\n\t\t{\n\t\t\tself.parseData(data, url);\n\t\t\tif (callback)\n\t\t\t{\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar result = new AnimationLoadResult();\n\t\t\tresult.url = url;\n\t\t\tresult.success = false;\n\t\t\tresult.message = error;\n\t\t\tself._result = result;\n\t\t\tif (callback)\n\t\t\t{\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t});\n};\n\n/**\n * @param {Object} jsonData\n * @param {string} dataUrl\n */\nAnimationLoader.prototype.parseData = function(jsonData, dataUrl)\n{\n\tthis._result = new AnimationLoadResult();\n\tthis._result.url = dataUrl;\n\n\tif (jsonData.header.fileType !== \"DOFAnimation\" && jsonData.header.fileType !== \"Animation\")\n\t{\n\t\tthis._result.success = false;\n\t\tthis._result.message = \"don't know how to handle file type: \" + jsonData.header.fileType;\n\t\treturn;\n\t}\n\n\tvar animContent = jsonData.content;\n\n\tvar motion = new Motion(animContent.name);\n\tfor (var channelIndex=0; channelIndex<animContent.channels.length; channelIndex++)\n\t{\n\t\tvar channelData = animContent.channels[channelIndex];\n\n\t\tvar sampleBuffer = new TimestampedBuffer();\n\t\tsampleBuffer.timestampList = channelData.times;\n\t\tsampleBuffer.dataList = channelData.values;\n\n\t\tvar track = new MotionTrack(channelData.dofName, sampleBuffer, channelData.length);\n\t\tmotion.addTrack(track);\n\t}\n\tthis._result.motion = motion;\n\n\tif (animContent.defaultDOFs)\n\t{\n\t\tthis._result.defaultDOFNames = animContent.defaultDOFs;\n\t}\n\n\tif (animContent.enumMaps)\n\t{\n\t\tthis._result.enumMaps = {};\n\t\tfor (var mapIndex=0; mapIndex<animContent.enumMaps.length; mapIndex++)\n\t\t{\n\t\t\tvar enumMapData = animContent.enumMaps[mapIndex];\n\t\t\tthis._result.enumMaps[enumMapData.dofName] = enumMapData.values;\n\t\t}\n\n\t\tif (this.flattenEnums)\n\t\t{\n\t\t\tflattenEnums(this._result.motion, this._result.enumMaps);\n\t\t}\n\t}\n\n\tif (this.resolvePaths)\n\t{\n\t\tresolvePaths(this._result.motion, dataUrl);\n\t}\n\n\tif (animContent.events)\n\t{\n\t\tthis._result.events = [];\n\t\tfor (var eventIndex=0; eventIndex<animContent.events.length; eventIndex++)\n\t\t{\n\t\t\tvar eventData = animContent.events[eventIndex];\n\t\t\tif (eventData.time === undefined || eventData.time === null)\n\t\t\t{\n\t\t\t\tslog(channel, \"AnimationLoader: skipping event with null or undefined time property\");\n\t\t\t}\n\t\t\telse if (eventData.time < 0 || eventData.time > motion.getDuration())\n\t\t\t{\n\t\t\t\tslog(channel, \"AnimationLoader: skipping event with time property: \"+eventData.time+\" outside of animation bounds, animation duration = \"+motion.getDuration());\n\t\t\t}\n\t\t\telse if (eventData.eventName === undefined || eventData.eventName === null || eventData.eventName === \"\")\n\t\t\t{\n\t\t\t\tslog(channel, \"AnimationLoader: skipping event with empty, null, or undefined eventName property\");\n\t\t\t}\n\t\t\telse if (typeof(eventData.eventName) !== \"string\")\n\t\t\t{\n\t\t\t\tslog(channel, \"AnimationLoader: skipping event with non-string eventName property: \"+eventData.eventName);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// event data ok!\n\t\t\t\tvar payload = (eventData.payload !== undefined) ? eventData.payload : null;\n\t\t\t\tthis._result.events.push(new MotionEvent(eventData.time, eventData.eventName, payload));\n\t\t\t}\n\t\t}\n\n\t\t// sort events by timestamp\n\t\tthis._result.events.sort(function(eventA, eventB)\n\t\t{\n\t\t\treturn eventA.getTimestamp() - eventB.getTimestamp();\n\t\t});\n\t}\n\n\tthis._result.success = true;\n};\n\n/**\n * @param {Motion} motion\n * @param {Object.<string, Object.<number, string>>} enumMaps\n */\nvar flattenEnums = function(motion, enumMaps)\n{\n\tvar tracks = motion.getTracks();\n\tvar dofs = Object.keys(tracks);\n\tfor (var dofIndex=0; dofIndex<dofs.length; dofIndex++)\n\t{\n\t\tvar dofName = dofs[dofIndex];\n\t\tif (enumMaps.hasOwnProperty(dofName))\n\t\t{\n\t\t\tvar samples = tracks[dofName].getMotionData().dataList;\n\t\t\tvar enumMap = enumMaps[dofName];\n\n\t\t\tfor (var sampleIndex=0; sampleIndex<samples.length; sampleIndex++)\n\t\t\t{\n\t\t\t\tvar sample = samples[sampleIndex];\n\t\t\t\tif (sample instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tsample = sample[0];\n\t\t\t\t}\n\n\t\t\t\tif (typeof(sample) === \"number\")\n\t\t\t\t{\n\t\t\t\t\tvar enumKey = Math.round(sample);\n\t\t\t\t\tsamples[sampleIndex] = [enumMap[enumKey]];\n\t\t\t\t\tif (!enumMap.hasOwnProperty(enumKey))\n\t\t\t\t\t{\n\t\t\t\t\t\tslog(channel, \"AnimationLoader: no enum value specified for key: \"+enumKey+\", DOF = \"+dofName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tslog(channel, \"AnimationLoader: DOF \"+dofName+\" has an enum map, but found non-numerical value: \"+sample);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * @param {Motion} motion\n * @param {string} dataUrl\n */\nvar resolvePaths = function(motion, dataUrl)\n{\n\tvar parentDir = \"\";\n\tvar slashIndex = dataUrl.lastIndexOf('/');\n\tvar backslashIndex = dataUrl.lastIndexOf('\\\\');\n\tif (slashIndex !== -1 || backslashIndex !== -1)\n\t{\n\t\tvar lastIndex = Math.max(slashIndex, backslashIndex);\n\t\tparentDir = dataUrl.substring(0, lastIndex+1);\n\t}\n\n\tvar tracks = motion.getTracks();\n\tvar dofs = Object.keys(tracks);\n\tfor (var dofIndex=0; dofIndex<dofs.length; dofIndex++)\n\t{\n\t\tvar dofName = dofs[dofIndex];\n\t\tvar samples = tracks[dofName].getMotionData().dataList;\n\t\tvar alreadyProcessedObjects = [];\n\n\t\tvar firstSample = samples[0];\n\t\tif (firstSample instanceof Array)\n\t\t{\n\t\t\tfirstSample = firstSample[0];\n\t\t}\n\n\t\tif (typeof(firstSample) === \"string\" || typeof(firstSample) === \"object\")\n\t\t{\n\t\t\t// string/object valued samples!\n\n\t\t\tfor (var sampleIndex=0; sampleIndex<samples.length; sampleIndex++)\n\t\t\t{\n\t\t\t\tvar sample = samples[sampleIndex];\n\t\t\t\tif (sample instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tsample = sample[0];\n\t\t\t\t}\n\n\t\t\t\tif (typeof(sample) === \"string\")\n\t\t\t\t{\n\t\t\t\t\tsamples[sampleIndex] = [parentDir + sample];\n\t\t\t\t}\n\t\t\t\telse if (typeof(sample) === \"object\")\n\t\t\t\t{\n\t\t\t\t\t//only object we have is a texture+normal object\n\t\t\t\t\t//process url or textureURL (and normalURL if present)\n\t\t\t\t\tif(alreadyProcessedObjects.indexOf(sample)<0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(typeof(sample.textureURL) === \"string\")\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsample.textureURL = parentDir + sample.textureURL;\n\t\t\t\t\t\t\tif(typeof(sample.normalURL) === \"string\")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsample.normalURL = parentDir + sample.normalURL;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\talreadyProcessedObjects.push(sample);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tslog(channel, \"AnimationLoader: DOF \"+dofName+\" had object-valued samples, but at least one (\"+sampleIndex+\") is missing \\\"textureURL\\\" field\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tslog(channel, \"AnimationLoader: DOF \"+dofName+\" had string-valued samples, but also found non-string value: \"+sample);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nmodule.exports = AnimationLoader;"],"sourceRoot":"/source/"}