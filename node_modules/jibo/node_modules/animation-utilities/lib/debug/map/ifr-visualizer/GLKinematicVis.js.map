{"version":3,"sources":["ifr-visualizer/GLKinematicVis.js"],"names":[],"mappings":"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","file":"ifr-visualizer/GLKinematicVis.js","sourcesContent":["/**\n * @author jg\n * Copyright 2015 IF Robots LLC\n */\n\n\"use strict\";\n\nvar GLLinePool = require(\"./GLLinePool\");\nvar ExtraMath = require(\"../ifr-geometry/ExtraMath\");\nvar Bakery = require(\"../ifr-core/Bakery\");\nvar THREE = require(\"three\");\n\n/**\n *\n * @param {BasicScene} renderInScene - visualizer will be added to this scene\n * @param {number} lineLength - length of line to use for visualizing.  30 if omitted/null.\n * @constructor\n */\nvar GLKinematicVis = function (renderInScene, lineLength) {\n\tif(lineLength == null){ //null or undefined (eqnull)\n\t\tlineLength = 30;\n\t}\n\n\t/** {GLLinePool} */\n\tthis._linePool = new GLLinePool(renderInScene, 600);\n\n\t/** THREE.Color*/\n\tthis._defaultColor = new THREE.Color(1,1,1);\n\n\t/** {number} */\n\tthis._rayLength = lineLength;\n\n\t/** {number} */\n\tthis._axesSize = lineLength/5;\n\n\t/** {number */\n\tthis._zeroVec = new THREE.Vector3(0,0,0);\n\n\t/** {number} */\n\tthis._planeLineLength = lineLength * 0.85;\n};\n\n/**\n * @param {*} owner\n * @returns {string}\n */\nvar getOwnerString = function(owner){\n\t/** {string} */\n\tvar useOwner = null;\n\n\tif (owner !== undefined && owner !== null) {\n\t\tif (typeof owner === \"string\") {\n\t\t\tuseOwner = owner;\n\t\t} else if (owner.name) {\n\t\t\tuseOwner = owner.name;\n\t\t} else if (owner.constructor) {\n\t\t\tuseOwner = owner.constructor.name;\n\t\t} else {\n\t\t\tuseOwner = \"default\";\n\t\t}\n\t}else{\n\t\tuseOwner = \"default\";\n\t}\n\n\treturn useOwner;\n};\n\n/**\n * @param {*} owner\n * @returns {string[]}\n */\nvar getVisualizerPath = function(owner){\n\treturn [\"KinematicVis\", getOwnerString(owner)];\n};\n\n\n/**\n *\n * @param {*} owner\n * @param {string} [name] - optional.  check only against owner if omitted.\n * @returns {boolean} true if object or object:name should be visualized\n */\nGLKinematicVis.prototype.shouldDraw = function(owner, name){\n\tvar useOwner = getOwnerString(owner);\n\tvar tabName = getVisualizerPath(owner);\n\tif(Bakery.getBoolean(\"Vis \"+useOwner, false, tabName)) {\n\t\tif (name) {\n\t\t\treturn Bakery.getBoolean(name, false, tabName);\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\t}else{\n\t\treturn false;\n\t}\n};\n\n/**\n *\n * @param {*} owner\n * @param {string} name\n * @param {THREE.Vector3} worldP1\n * @param {THREE.Vector3} worldP2\n * @param {THREE.Color} [color]\n */\nGLKinematicVis.prototype.drawLineWorld = function(owner, name, worldP1, worldP2, color){\n\tif(this.shouldDraw(owner, name)) {\n\t\tif (color === undefined || color === null) {\n\t\t\tcolor = this._defaultColor;\n\t\t}\n\n\t\tthis._linePool.drawOnce(worldP1, worldP2, color);\n\t}\n};\n\nGLKinematicVis.prototype.drawLineLocal = (function(){\n\n\t/** {THREE.Vector3} */\n\tvar worldP1 = null;\n\t/** {THREE.Vector3} */\n\tvar worldP2 = null;\n\n\t/**\n\t * @param {*} owner\n\t * @param {string} name\n\t * @param {THREE.Object3D} frame\n\t * @param {THREE.Vector3} localP1\n\t * @param {THREE.Vector3} localP2\n\t * @param {THREE.Color} [color]\n\t */\n\treturn function(owner, name, frame, localP1, localP2, color){\n\t\tif(this.shouldDraw(owner, name)) {\n\n\t\t\tif(worldP1 === null){\n\t\t\t\tworldP1 = new THREE.Vector3();\n\t\t\t\tworldP2 = new THREE.Vector3();\n\t\t\t}\n\n\t\t\tframe.localToWorld(worldP1.copy(localP1));\n\t\t\tframe.localToWorld(worldP2.copy(localP2));\n\n\t\t\tthis.drawLineWorld(owner, name, worldP1, worldP2, color);\n\t\t}\n\t};\n}());\n\n\nGLKinematicVis.prototype.drawAxesWorld = (function(){\n\t/** {THREE.Vector3} */\n\tvar dir = null;\n\n\t/** {THREE.Color} */\n\tvar red = null;\n\tvar green = null;\n\tvar blue = null;\n\n\t/**\n\t * @param {*} owner\n\t * @param {string} name\n\t * @param {THREE.Vector3} worldP\n\t * @param {THREE.Color} [color] - color of whole axes, if omitted defaults to RGB for XYZ coloring.\n\t */\n\treturn function(owner, name, worldP, color){\n\t\tif(this.shouldDraw(owner, name)) {\n\t\t\tif(dir === null){\n\t\t\t\tdir = new THREE.Vector3();\n\t\t\t\tred = new THREE.Color(1,0,0);\n\t\t\t\tgreen = new THREE.Color(0,1,0);\n\t\t\t\tblue = new THREE.Color(0,0,1);\n\t\t\t}\n\n\t\t\tthis.drawRayWorld(owner, name, worldP, dir.set( 1, 0, 0), color?color:red, this._axesSize);\n\t\t\tthis.drawRayWorld(owner, name, worldP, dir.set(-1, 0, 0), color?color:red, this._axesSize);\n\t\t\tthis.drawRayWorld(owner, name, worldP, dir.set( 0, 1, 0), color?color:green, this._axesSize);\n\t\t\tthis.drawRayWorld(owner, name, worldP, dir.set( 0,-1, 0), color?color:green, this._axesSize);\n\t\t\tthis.drawRayWorld(owner, name, worldP, dir.set( 0, 0, 1), color?color:blue, this._axesSize);\n\t\t\tthis.drawRayWorld(owner, name, worldP, dir.set( 0, 0,-1), color?color:blue, this._axesSize);\n\t\t}\n\t};\n}());\n\n\nGLKinematicVis.prototype.drawAxesLocal = (function(){\n\n\t/** {THREE.Vector3} */\n\tvar dir = null;\n\n\t/** {THREE.Color} */\n\tvar red = null;\n\tvar green = null;\n\tvar blue = null;\n\n\t/**\n\t * Draws an axes marker (3 lines along xyz\n\t *\n\t * @param {*} owner\n\t * @param {string} name\n\t * @param {THREE.Object3D} frame\n\t * @param {THREE.Vector3} localP\n\t * @param {THREE.Color} [color] - color of whole axes, if omitted defaults to RGB for XYZ coloring.\n\t */\n\treturn function(owner, name, frame, localP, color){\n\t\tif(this.shouldDraw(owner, name)) {\n\n\t\t\tif(dir === null){\n\t\t\t\tdir = new THREE.Vector3();\n\t\t\t\tred = new THREE.Color(1,0,0);\n\t\t\t\tgreen = new THREE.Color(0,1,0);\n\t\t\t\tblue = new THREE.Color(0,0,1);\n\t\t\t}\n\n\t\t\tthis.drawRayLocal(owner, name, frame, localP, dir.set( 1, 0, 0), color?color:red, this._axesSize);\n\t\t\tthis.drawRayLocal(owner, name, frame, localP, dir.set(-1, 0, 0), color?color:red, this._axesSize);\n\t\t\tthis.drawRayLocal(owner, name, frame, localP, dir.set( 0, 1, 0), color?color:green, this._axesSize);\n\t\t\tthis.drawRayLocal(owner, name, frame, localP, dir.set( 0,-1, 0), color?color:green, this._axesSize);\n\t\t\tthis.drawRayLocal(owner, name, frame, localP, dir.set( 0, 0, 1), color?color:blue, this._axesSize);\n\t\t\tthis.drawRayLocal(owner, name, frame, localP, dir.set( 0, 0,-1), color?color:blue, this._axesSize);\n\t\t}\n\t};\n}());\n\n\nGLKinematicVis.prototype.drawRayWorld = (function(){\n\n\t/** {THREE.Vector3} */\n\tvar endPoint = null;\n\t/** {THREE.Vector3} */\n\tvar directionScaled = null;\n\n\t/**\n\t * @param {*} owner\n\t * @param {string} name\n\t * @param {THREE.Vector3} worldPoint\n\t * @param {THREE.Vector3} worldDirection\n\t * @param {THREE.Color} [color]\n\t * @param {number} [rayLength] - defaults to _rayLength\n\t */\n\treturn function(owner, name, worldPoint, worldDirection, color, rayLength){\n\t\tif(this.shouldDraw(owner, name)) {\n\n\t\t\tif(endPoint === null){\n\t\t\t\tendPoint = new THREE.Vector3();\n\t\t\t\tdirectionScaled = new THREE.Vector3();\n\t\t\t}\n\n\t\t\tif(rayLength == null){ //null or undefined (eqnull)\n\t\t\t\trayLength = this._rayLength;\n\t\t\t}\n\n\t\t\tdirectionScaled.copy(worldDirection).setLength(rayLength);\n\n\t\t\tendPoint.addVectors(worldPoint, directionScaled);\n\n\t\t\tthis.drawLineWorld(owner, name, worldPoint, endPoint, color);\n\t\t}\n\t};\n}());\n\nGLKinematicVis.prototype.drawRayLocal = (function(){\n\n\t/** {THREE.Vector3} */\n\tvar worldPoint = null;\n\t/** {THREE.Vector3} */\n\tvar worldDirection = null;\n\n\t/**\n\t * @param {*} owner\n\t * @param {string} name\n\t * @param {THREE.Object3D} frame\n\t * @param {THREE.Vector3} localPoint - (default 0,0,0 if omitted or null)\n\t * @param {THREE.Vector3} localDirection\n\t * @param {THREE.Color} [color]\n\t * @param {number} [rayLength] - defaults to _rayLength\n\t */\n\treturn function(owner, name, frame, localPoint, localDirection, color, rayLength){\n\t\tif(this.shouldDraw(owner, name)) {\n\n\t\t\tif(worldPoint === null){\n\t\t\t\tworldPoint = new THREE.Vector3();\n\t\t\t\tworldDirection = new THREE.Vector3();\n\t\t\t}\n\n\t\t\tif(localPoint === undefined || localPoint === null){\n\t\t\t\tlocalPoint = this._zeroVec;\n\t\t\t}\n\n\t\t\tframe.localToWorld(worldPoint.copy(localPoint));\n\n\t\t\tExtraMath.convertDirectionLocalToWorld(frame, localDirection, worldDirection);\n\n\t\t\tthis.drawRayWorld(owner, name, worldPoint, worldDirection, color, rayLength);\n\t\t}\n\t};\n}());\n\nGLKinematicVis.prototype.drawConeWorld = (function(){\n\n\t/** {THREE.Quaternion} */\n\tvar planeRot = null;\n\t/** {THREE.Quaternion} */\n\tvar coneItRot = null;\n\t/** {THREE.Vector3} */\n\tvar perpVec = null;\n\t/** {THREE.Vector3} */\n\tvar coneItAxis = null;\n\t/** {THREE.Vector3} */\n\tvar rotatedEndPoint = null;\n\n\t/**\n\t * @param {*} owner\n\t * @param {string} name\n\t * @param {THREE.Vector3} worldPoint\n\t * @param {THREE.Vector3} worldNormal\n\t * @param {number} angleUpFromPlane - (default 0 for plane if omitted or null)\n\t * @param {THREE.Color} [color]\n\t */\n\treturn function(owner, name, worldPoint, worldNormal, angleUpFromPlane, color){\n\t\tif(this.shouldDraw(owner, name)) {\n\n\t\t\tif (planeRot === null) {\n\t\t\t\t//init all\n\t\t\t\tplaneRot = new THREE.Quaternion();\n\t\t\t\tconeItRot = new THREE.Quaternion();\n\t\t\t\tperpVec = new THREE.Vector3();\n\t\t\t\tconeItAxis = new THREE.Vector3();\n\t\t\t\trotatedEndPoint = new THREE.Vector3();\n\t\t\t}\n\n\t\t\tif (angleUpFromPlane === undefined || angleUpFromPlane === null) {\n\t\t\t\tangleUpFromPlane = 0;\n\t\t\t}\n\n\t\t\tvar planeDivisions = 100;\n\n\t\t\tExtraMath.quatFromAxisAngle(worldNormal, Math.PI*2/planeDivisions, planeRot);\n\t\t\tExtraMath.findOrthogonal(worldNormal, perpVec);\n\t\t\tperpVec.setLength(this._planeLineLength);\n\n\t\t\tconeItAxis.crossVectors(perpVec, worldNormal);\n\n\t\t\tExtraMath.quatFromAxisAngle(coneItAxis, angleUpFromPlane, coneItRot);\n\n\t\t\tperpVec.applyQuaternion(coneItRot);\n\n\t\t\tfor(var i = 0; i < planeDivisions; i++){\n\t\t\t\trotatedEndPoint.addVectors(perpVec, worldPoint);\n\t\t\t\tthis.drawLineWorld(owner, name, worldPoint, rotatedEndPoint, color);\n\t\t\t\tperpVec.applyQuaternion(planeRot);\n\t\t\t}\n\t\t}\n\t};\n}());\n\nGLKinematicVis.prototype.drawConeLocal = (function(){\n\n\t/** {THREE.Vector3} */\n\tvar worldPoint = null;\n\t/** {THREE.Vector3} */\n\tvar worldNormal = null;\n\n\t/**\n\t * @param {*} owner\n\t * @param {string} name\n\t * @param {THREE.Object3D} frame\n\t * @param {THREE.Vector3} localPoint - (default 0,0,0 if omitted or null)\n\t * @param {THREE.Vector3} localNormal\n\t * @param {number} angleUpFromPlane - (default 0 for plane if omitted or null)\n\t * @param {THREE.Color} [color]\n\t */\n\treturn function(owner, name, frame, localPoint, localNormal, angleUpFromPlane, color){\n\n\t\tif(worldPoint === null){\n\t\t\tworldPoint = new THREE.Vector3();\n\t\t\tworldNormal = new THREE.Vector3();\n\t\t}\n\n\t\tif(localPoint === undefined || localPoint === null){\n\t\t\tlocalPoint = this._zeroVec;\n\t\t}\n\n\t\tframe.localToWorld(worldPoint.copy(localPoint));\n\n\t\tExtraMath.convertDirectionLocalToWorld(frame, localNormal, worldNormal);\n\n\t\tthis.drawConeWorld(owner, name, worldPoint, worldNormal, angleUpFromPlane, color);\n\n\n\t};\n}());\n\n\n/**\n * @param {*} owner\n * @param {string} name\n * @param {THREE.Vector3} localPoint - (default 0,0,0 if omitted or null)\n * @param {THREE.Vector3} localNormal\n * @param {THREE.Color} [color]\n */\nGLKinematicVis.prototype.drawPlaneWorld = function(owner, name, localPoint, localNormal, color){\n\treturn this.drawConeWorld(owner, name, localPoint, localNormal, 0, color);\n};\n\n/**\n * @param {*} owner\n * @param {string} name\n * @param {THREE.Object3D} frame\n * @param {THREE.Vector3} localPoint - (default 0,0,0 if omitted or null)\n * @param {THREE.Vector3} localNormal\n * @param {THREE.Color} [color]\n */\nGLKinematicVis.prototype.drawPlaneLocal = function(owner, name, frame, localPoint, localNormal, color){\n\treturn this.drawConeLocal(owner, name, frame, localPoint, localNormal, 0, color);\n};\n\n\n\n\nmodule.exports = GLKinematicVis;\n"],"sourceRoot":"/source/"}