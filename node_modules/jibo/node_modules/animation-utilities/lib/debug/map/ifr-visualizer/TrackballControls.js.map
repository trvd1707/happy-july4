{"version":3,"sources":["ifr-visualizer/TrackballControls.js"],"names":[],"mappings":"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","file":"ifr-visualizer/TrackballControls.js","sourcesContent":["/**\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin \t/ http://mark-lundin.com\n */\n\n// adapted directly from three.js examples\n\n\"use strict\";\n\nvar THREE = require(\"three\");\nvar TrackballControls = function(object, domElement)\n{\n\n\tvar _this = this;\n\tvar STATE = {NONE: -1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4};\n\n\tthis.object = object;\n\tthis.domElement = null;\n\n\t// API\n\n\tthis.enabled = false;\n\n\tthis.screen = {left: 0, top: 0, width: 0, height: 0};\n\n\tthis.rotateSpeed = 1.0;\n\tthis.zoomSpeed = 1.2;\n\tthis.panSpeed = 0.3;\n\n\tthis.noRotate = false;\n\tthis.noZoom = false;\n\tthis.noPan = false;\n\tthis.noRoll = false;\n\n\tthis.staticMoving = false;\n\tthis.dynamicDampingFactor = 0.2;\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\tthis.keys = [65 /*A*/, 83 /*S*/, 68 /*D*/];\n\n\t// internals\n\n\tthis.target = new THREE.Vector3();\n\n\tvar EPS = 0.000001;\n\n\tvar lastPosition = new THREE.Vector3();\n\n\tvar _state = STATE.NONE,\n\t\t_prevState = STATE.NONE,\n\n\t\t_eye = new THREE.Vector3(),\n\n\t\t_rotateStart = new THREE.Vector3(),\n\t\t_rotateEnd = new THREE.Vector3(),\n\n\t\t_zoomStart = new THREE.Vector2(),\n\t\t_zoomEnd = new THREE.Vector2(),\n\n\t\t_touchZoomDistanceStart = 0,\n\t\t_touchZoomDistanceEnd = 0,\n\n\t\t_panStart = new THREE.Vector2(),\n\t\t_panEnd = new THREE.Vector2();\n\n\t// for reset\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.up0 = this.object.up.clone();\n\n\t// events\n\n\tvar changeEvent = {type: 'change'};\n\tvar startEvent = {type: 'start'};\n\tvar endEvent = {type: 'end'};\n\n\n\t// methods\n\n\tthis.handleResize = function()\n\t{\n\n\t\tif (_this.enabled === false) return;\n\n\t\tif (this.domElement === document)\n\t\t{\n\n\t\t\tthis.screen.left = 0;\n\t\t\tthis.screen.top = 0;\n\t\t\tthis.screen.width = window.innerWidth;\n\t\t\tthis.screen.height = window.innerHeight;\n\n\t\t}\n\t\telse\n\t\t{\n\n\t\t\tvar box = this.domElement.getBoundingClientRect();\n\t\t\t// adjustments come from similar code in the jquery offset() function\n\t\t\tvar d = this.domElement.ownerDocument.documentElement;\n\t\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\t\tthis.screen.width = box.width;\n\t\t\tthis.screen.height = box.height;\n\n\t\t}\n\n\t};\n\n\tthis.handleEvent = function(event)\n\t{\n\n\t\tif (typeof this[event.type] == 'function')\n\t\t{\n\n\t\t\tthis[event.type](event);\n\n\t\t}\n\n\t};\n\n\tvar getMouseOnScreen = ( function()\n\t{\n\n\t\tvar vector = new THREE.Vector2();\n\n\t\treturn function(pageX, pageY)\n\t\t{\n\n\t\t\tvector.set(\n\t\t\t\t( pageX - _this.screen.left ) / _this.screen.width,\n\t\t\t\t( pageY - _this.screen.top ) / _this.screen.height\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tvar getMouseProjectionOnBall = ( function()\n\t{\n\n\t\tvar vector = new THREE.Vector3();\n\t\tvar objectUp = new THREE.Vector3();\n\t\tvar mouseOnBall = new THREE.Vector3();\n\n\t\treturn function(pageX, pageY)\n\t\t{\n\n\t\t\tmouseOnBall.set(\n\t\t\t\t( pageX - _this.screen.width * 0.5 - _this.screen.left ) / (_this.screen.width * .5),\n\t\t\t\t( _this.screen.height * 0.5 + _this.screen.top - pageY ) / (_this.screen.height * .5),\n\t\t\t\t0.0\n\t\t\t);\n\n\t\t\tvar length = mouseOnBall.length();\n\n\t\t\tif (_this.noRoll)\n\t\t\t{\n\n\t\t\t\tif (length < Math.SQRT1_2)\n\t\t\t\t{\n\n\t\t\t\t\tmouseOnBall.z = Math.sqrt(1.0 - length * length);\n\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\n\t\t\t\t\tmouseOnBall.z = .5 / length;\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse if (length > 1.0)\n\t\t\t{\n\n\t\t\t\tmouseOnBall.normalize();\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\n\t\t\t\tmouseOnBall.z = Math.sqrt(1.0 - length * length);\n\n\t\t\t}\n\n\t\t\t_eye.copy(_this.object.position).sub(_this.target);\n\n\t\t\tvector.copy(_this.object.up).setLength(mouseOnBall.y)\n\t\t\tvector.add(objectUp.copy(_this.object.up).cross(_eye).setLength(mouseOnBall.x));\n\t\t\tvector.add(_eye.setLength(mouseOnBall.z));\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tthis.rotateCamera = (function()\n\t{\n\n\t\tvar axis = new THREE.Vector3(),\n\t\t\tquaternion = new THREE.Quaternion();\n\n\n\t\treturn function()\n\t\t{\n\n\t\t\tvar angle = Math.acos(_rotateStart.dot(_rotateEnd) / _rotateStart.length() / _rotateEnd.length());\n\n\t\t\tif (angle)\n\t\t\t{\n\n\t\t\t\taxis.crossVectors(_rotateStart, _rotateEnd).normalize();\n\n\t\t\t\tangle *= _this.rotateSpeed;\n\n\t\t\t\tquaternion.setFromAxisAngle(axis, -angle);\n\n\t\t\t\t_eye.applyQuaternion(quaternion);\n\t\t\t\t_this.object.up.applyQuaternion(quaternion);\n\n\t\t\t\t_rotateEnd.applyQuaternion(quaternion);\n\n\t\t\t\tif (_this.staticMoving)\n\t\t\t\t{\n\n\t\t\t\t\t_rotateStart.copy(_rotateEnd);\n\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\n\t\t\t\t\tquaternion.setFromAxisAngle(axis, angle * ( _this.dynamicDampingFactor - 1.0 ));\n\t\t\t\t\t_rotateStart.applyQuaternion(quaternion);\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t}());\n\n\tthis.zoomCamera = function()\n\t{\n\n\t\tvar factor;\n\n\t\tif (_state === STATE.TOUCH_ZOOM_PAN)\n\t\t{\n\n\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\t\t\t_eye.multiplyScalar(factor);\n\n\t\t}\n\t\telse\n\t\t{\n\n\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * _this.zoomSpeed;\n\n\t\t\tif (factor !== 1.0 && factor > 0.0)\n\t\t\t{\n\n\t\t\t\t_eye.multiplyScalar(factor);\n\n\t\t\t\tif (_this.staticMoving)\n\t\t\t\t{\n\n\t\t\t\t\t_zoomStart.copy(_zoomEnd);\n\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\n\t\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.panCamera = (function()\n\t{\n\n\t\tvar mouseChange = new THREE.Vector2(),\n\t\t\tobjectUp = new THREE.Vector3(),\n\t\t\tpan = new THREE.Vector3();\n\n\t\treturn function()\n\t\t{\n\n\t\t\tmouseChange.copy(_panEnd).sub(_panStart);\n\n\t\t\tif (mouseChange.lengthSq())\n\t\t\t{\n\n\t\t\t\tmouseChange.multiplyScalar(_eye.length() * _this.panSpeed);\n\n\t\t\t\tpan.copy(_eye).cross(_this.object.up).setLength(mouseChange.x);\n\t\t\t\tpan.add(objectUp.copy(_this.object.up).setLength(mouseChange.y));\n\n\t\t\t\t_this.object.position.add(pan);\n\t\t\t\t_this.target.add(pan);\n\n\t\t\t\tif (_this.staticMoving)\n\t\t\t\t{\n\n\t\t\t\t\t_panStart.copy(_panEnd);\n\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\n\t\t\t\t\t_panStart.add(mouseChange.subVectors(_panEnd, _panStart).multiplyScalar(_this.dynamicDampingFactor));\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t}());\n\n\tthis.checkDistances = function()\n\t{\n\n\t\tif (!_this.noZoom || !_this.noPan)\n\t\t{\n\n\t\t\tif (_eye.lengthSq() > _this.maxDistance * _this.maxDistance)\n\t\t\t{\n\n\t\t\t\t_this.object.position.addVectors(_this.target, _eye.setLength(_this.maxDistance));\n\n\t\t\t}\n\n\t\t\tif (_eye.lengthSq() < _this.minDistance * _this.minDistance)\n\t\t\t{\n\n\t\t\t\t_this.object.position.addVectors(_this.target, _eye.setLength(_this.minDistance));\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.update = function()\n\t{\n\n\t\t_eye.subVectors(_this.object.position, _this.target);\n\n\t\tif (!_this.noRotate)\n\t\t{\n\n\t\t\t_this.rotateCamera();\n\n\t\t}\n\n\t\tif (!_this.noZoom)\n\t\t{\n\n\t\t\t_this.zoomCamera();\n\n\t\t}\n\n\t\tif (!_this.noPan)\n\t\t{\n\n\t\t\t_this.panCamera();\n\n\t\t}\n\n\t\t_this.object.position.addVectors(_this.target, _eye);\n\n\t\t_this.checkDistances();\n\n\t\t_this.object.lookAt(_this.target);\n\n\t\tif (lastPosition.distanceToSquared(_this.object.position) > EPS)\n\t\t{\n\n\t\t\t_this.dispatchEvent(changeEvent);\n\n\t\t\tlastPosition.copy(_this.object.position);\n\n\t\t}\n\n\t};\n\n\tthis.reset = function()\n\t{\n\n\t\t_state = STATE.NONE;\n\t\t_prevState = STATE.NONE;\n\n\t\t_this.target.copy(_this.target0);\n\t\t_this.object.position.copy(_this.position0);\n\t\t_this.object.up.copy(_this.up0);\n\n\t\t_eye.subVectors(_this.object.position, _this.target);\n\n\t\t_this.object.lookAt(_this.target);\n\n\t\t_this.dispatchEvent(changeEvent);\n\n\t\tlastPosition.copy(_this.object.position);\n\n\t};\n\n\t// listeners\n\n\tfunction keydown(event)\n\t{\n\n\t\tif (_this.enabled === false) return;\n\n\t\twindow.removeEventListener('keydown', keydown);\n\n\t\t_prevState = _state;\n\n\t\tif (_state !== STATE.NONE)\n\t\t{\n\n\t\t\treturn;\n\n\t\t}\n\t\telse if (event.keyCode === _this.keys[STATE.ROTATE] && !_this.noRotate)\n\t\t{\n\n\t\t\t_state = STATE.ROTATE;\n\n\t\t}\n\t\telse if (event.keyCode === _this.keys[STATE.ZOOM] && !_this.noZoom)\n\t\t{\n\n\t\t\t_state = STATE.ZOOM;\n\n\t\t}\n\t\telse if (event.keyCode === _this.keys[STATE.PAN] && !_this.noPan)\n\t\t{\n\n\t\t\t_state = STATE.PAN;\n\n\t\t}\n\n\t}\n\n\tfunction keyup(event) // eslint-disable-line no-unused-vars\n\t{\n\n\t\tif (_this.enabled === false) return;\n\n\t\t_state = _prevState;\n\n\t\twindow.addEventListener('keydown', keydown, false);\n\n\t}\n\n\tfunction mousedown(event)\n\t{\n\n\t\tif (_this.enabled === false) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (_state === STATE.NONE)\n\t\t{\n\n\t\t\t_state = event.button;\n\t\t\tif (event.button === 0 && event.shiftKey)\n\t\t\t{\n\t\t\t\t_state = STATE.PAN;\n\t\t\t}\n\n\t\t}\n\n\t\tif (_state === STATE.ROTATE && !_this.noRotate)\n\t\t{\n\n\t\t\t_rotateStart.copy(getMouseProjectionOnBall(event.pageX, event.pageY));\n\t\t\t_rotateEnd.copy(_rotateStart);\n\n\t\t}\n\t\telse if (_state === STATE.ZOOM && !_this.noZoom)\n\t\t{\n\n\t\t\t_zoomStart.copy(getMouseOnScreen(event.pageX, event.pageY));\n\t\t\t_zoomEnd.copy(_zoomStart);\n\n\t\t}\n\t\telse if (_state === STATE.PAN && !_this.noPan)\n\t\t{\n\n\t\t\t_panStart.copy(getMouseOnScreen(event.pageX, event.pageY));\n\t\t\t_panEnd.copy(_panStart)\n\n\t\t}\n\n\t\tdocument.addEventListener('mousemove', mousemove, false);\n\t\tdocument.addEventListener('mouseup', mouseup, false);\n\n\t\t_this.dispatchEvent(startEvent);\n\n\t}\n\n\tfunction mousemove(event)\n\t{\n\n\t\tif (_this.enabled === false) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (_state === STATE.ROTATE && !_this.noRotate)\n\t\t{\n\n\t\t\t_rotateEnd.copy(getMouseProjectionOnBall(event.pageX, event.pageY));\n\n\t\t}\n\t\telse if (_state === STATE.ZOOM && !_this.noZoom)\n\t\t{\n\n\t\t\t_zoomEnd.copy(getMouseOnScreen(event.pageX, event.pageY));\n\n\t\t}\n\t\telse if (_state === STATE.PAN && !_this.noPan)\n\t\t{\n\n\t\t\t_panEnd.copy(getMouseOnScreen(event.pageX, event.pageY));\n\n\t\t}\n\n\t}\n\n\tfunction mouseup(event)\n\t{\n\n\t\tif (_this.enabled === false) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t_state = STATE.NONE;\n\n\t\tdocument.removeEventListener('mousemove', mousemove);\n\t\tdocument.removeEventListener('mouseup', mouseup);\n\t\t_this.dispatchEvent(endEvent);\n\n\t}\n\n\tfunction mousewheel(event)\n\t{\n\n\t\tif (_this.enabled === false) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar delta = 0;\n\n\t\tif (event.wheelDelta)\n\t\t{ // WebKit / Opera / Explorer 9\n\n\t\t\tdelta = event.wheelDelta / 40;\n\n\t\t}\n\t\telse if (event.detail)\n\t\t{ // Firefox\n\n\t\t\tdelta = -event.detail / 3;\n\n\t\t}\n\n\t\t_zoomStart.y += delta * 0.01;\n\t\t_this.dispatchEvent(startEvent);\n\t\t_this.dispatchEvent(endEvent);\n\n\t}\n\n\tfunction touchstart(event)\n\t{\n\n\t\tif (_this.enabled === false) return;\n\n\t\tswitch (event.touches.length)\n\t\t{\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_rotateStart.copy(getMouseProjectionOnBall(event.touches[0].pageX, event.touches[0].pageY));\n\t\t\t\t_rotateEnd.copy(_rotateStart);\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tvar x = ( event.touches[0].pageX + event.touches[1].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[0].pageY + event.touches[1].pageY ) / 2;\n\t\t\t\t_panStart.copy(getMouseOnScreen(x, y));\n\t\t\t\t_panEnd.copy(_panStart);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t_state = STATE.NONE;\n\n\t\t}\n\t\t_this.dispatchEvent(startEvent);\n\n\n\t}\n\n\tfunction touchmove(event)\n\t{\n\n\t\tif (_this.enabled === false) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch (event.touches.length)\n\t\t{\n\n\t\t\tcase 1:\n\t\t\t\t_rotateEnd.copy(getMouseProjectionOnBall(event.touches[0].pageX, event.touches[0].pageY));\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\t\t\t\t_touchZoomDistanceEnd = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tvar x = ( event.touches[0].pageX + event.touches[1].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[0].pageY + event.touches[1].pageY ) / 2;\n\t\t\t\t_panEnd.copy(getMouseOnScreen(x, y));\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t_state = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction touchend(event)\n\t{\n\n\t\tif (_this.enabled === false) return;\n\n\t\tswitch (event.touches.length)\n\t\t{\n\n\t\t\tcase 1:\n\t\t\t\t_rotateEnd.copy(getMouseProjectionOnBall(event.touches[0].pageX, event.touches[0].pageY));\n\t\t\t\t_rotateStart.copy(_rotateEnd);\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd = 0;\n\n\t\t\t\tvar x = ( event.touches[0].pageX + event.touches[1].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[0].pageY + event.touches[1].pageY ) / 2;\n\t\t\t\t_panEnd.copy(getMouseOnScreen(x, y));\n\t\t\t\t_panStart.copy(_panEnd);\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_state = STATE.NONE;\n\t\t_this.dispatchEvent(endEvent);\n\n\t}\n\n\tfunction contextmenu(event)\n\t{\n\t\tevent.preventDefault();\n\t}\n\n\tthis.detachFromContainer = function()\n\t{\n\t\tif (_this.domElement)\n\t\t{\n\t\t\t_this.domElement.removeEventListener('contextmenu', contextmenu, false);\n\n\t\t\t_this.domElement.removeEventListener('mousedown', mousedown, false);\n\n\t\t\t_this.domElement.removeEventListener('mousewheel', mousewheel, false);\n\t\t\t_this.domElement.removeEventListener('DOMMouseScroll', mousewheel, false); // firefox\n\n\t\t\t_this.domElement.removeEventListener('touchstart', touchstart, false);\n\t\t\t_this.domElement.removeEventListener('touchend', touchend, false);\n\t\t\t_this.domElement.removeEventListener('touchmove', touchmove, false);\n\t\t}\n\n\t\twindow.removeEventListener('keydown', keydown, false);\n\t\twindow.removeEventListener('keyup', keyup, false);\n\n\t\tdocument.removeEventListener('mousemove', mousemove);\n\t\tdocument.removeEventListener('mouseup', mouseup);\n\n\t\t_state = STATE.NONE;\n\t\t_this.enabled = false;\n\t\t_this.domElement = null;\n\t};\n\n\tthis.dispose = function()\n\t{\n\t\t_this.detachFromContainer();\n\t};\n\n\tthis.destroy = function()\n\t{\n\t\t_this.dispose();\n\t};\n\n\tthis.attachToContainer = function(element)\n\t{\n\t\tif (_this.domElement)\n\t\t{\n\t\t\t_this.detachFromContainer();\n\t\t}\n\n\t\t_this.domElement = ( element !== undefined ) ? element : document;\n\n\t\tif (_this.domElement)\n\t\t{\n\t\t\t_this.domElement.addEventListener('contextmenu', contextmenu, false);\n\n\t\t\t_this.domElement.addEventListener('mousedown', mousedown, false);\n\n\t\t\t_this.domElement.addEventListener('mousewheel', mousewheel, false);\n\t\t\t_this.domElement.addEventListener('DOMMouseScroll', mousewheel, false); // firefox\n\n\t\t\t_this.domElement.addEventListener('touchstart', touchstart, false);\n\t\t\t_this.domElement.addEventListener('touchend', touchend, false);\n\t\t\t_this.domElement.addEventListener('touchmove', touchmove, false);\n\n\t\t\twindow.addEventListener('keydown', keydown, false);\n\t\t\twindow.addEventListener('keyup', keyup, false);\n\n\t\t\t_this.enabled = true;\n\n\t\t\t_this.handleResize();\n\n\t\t\t// force an update at start\n\t\t\t_this.update();\n\t\t}\n\t};\n\n\tthis.attachToContainer(domElement);\n};\n\nTrackballControls.prototype = Object.create(THREE.EventDispatcher.prototype);\n\nmodule.exports = TrackballControls;"],"sourceRoot":"/source/"}