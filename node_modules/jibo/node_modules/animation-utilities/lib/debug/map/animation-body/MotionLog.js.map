{"version":3,"sources":["animation-body/MotionLog.js"],"names":[],"mappings":";;;;AAIA;;AAGA,IAAI,OAAO,QAAQ,kBAAR,CAAP;AACJ,IAAI,YAAY,QAAQ,uBAAR,CAAZ;;AAGJ,IAAI,YAAY,EAAZ;;;;;;AAOJ,UAAU,SAAV,GAAsB,UAAS,QAAT,EACtB;AACC,KAAI,KAAK,IAAL,CADL;AAEC,MAAK,QAAQ,EAAR,CAAL,CAFD;AAGC,KAAI,eAAe,GAAG,iBAAH,CAAqB,QAArB,CAAf,CAHL;AAIC,KAAI,QAAQ,IAAR,CAJL;AAKC,QAAO,UAAS,IAAT,EACP;AACC,MAAI,KAAJ,EACA;AACC,WAAQ,KAAR,CADD;GADA,MAKA;AACC,gBAAa,KAAb,CAAmB,KAAnB,EADD;GALA;AAQA,eAAa,KAAb,CAAmB,KAAK,SAAL,CAAe,IAAf,CAAnB,EATD;EADO,CALR;CADsB;;;;;;AAwBtB,UAAU,OAAV,GAAoB,UAAS,QAAT,EAAmB,EAAnB,EACpB;AACC,WAAU,QAAV,CAAmB,QAAnB,EAA6B,UAAS,KAAT,EAAgB,IAAhB,EAC7B;AACC,MAAI,KAAJ,EACA;AACC,MAAG,KAAH,EAAU,IAAV,EADD;GADA,MAKA;AACC,OAAI,YAAY,IAAZ,CADL;AAEC,OACA;AACC,QAAI,aAAa,MAAI,IAAJ,GAAS,GAAT,CADlB;AAEC,gBAAY,KAAK,KAAL,CAAW,UAAX,CAAZ,CAFD;AAGC,SAAK,IAAI,IAAE,CAAF,EAAK,IAAE,UAAU,MAAV,EAAkB,GAAlC,EACA;AACC,eAAU,CAAV,EAAa,SAAb,GAAyB,KAAK,mBAAL,CAAyB,UAAU,CAAV,EAAa,SAAb,CAAuB,UAAvB,CAAlD,CADD;KADA;IAJD,CASA,OAAO,CAAP,EACA;AACC,OAAG,CAAH,EAAM,IAAN,EADD;IADA;;AAKA,MAAG,IAAH,EAAS,SAAT,EAhBD;GALA;EAF4B,CAA7B,CADD;CADoB;;AA+BpB,OAAO,OAAP,GAAiB,SAAjB","file":"animation-body/MotionLog.js","sourcesContent":["/**\n * @author mattb\n */\n\n\"use strict\";\n\n\nvar Time = require(\"../ifr-core/Time\");\nvar FileTools = require(\"../ifr-core/FileTools\");\n\n\nvar MotionLog = {};\n\n\n/**\n * @param {string} filename\n * @return {Function}\n */\nMotionLog.createLog = function(filename)\n{\n\tvar fs = \"fs\";\n\tfs = require(fs);\n\tvar motionStream = fs.createWriteStream(filename);\n\tvar first = true;\n\treturn function(info)\n\t{\n\t\tif (first)\n\t\t{\n\t\t\tfirst = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmotionStream.write(\",\\n\");\n\t\t}\n\t\tmotionStream.write(JSON.stringify(info));\n\t};\n};\n\n/**\n * @param {string} filename\n * @param {Function} cb\n */\nMotionLog.loadLog = function(filename, cb)\n{\n\tFileTools.loadText(filename, function(error, data)\n\t{\n\t\tif (error)\n\t\t{\n\t\t\tcb(error, null);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar infoArray = null;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tvar infoString = \"[\"+data+\"]\";\n\t\t\t\tinfoArray = JSON.parse(infoString);\n\t\t\t\tfor (var i=0; i<infoArray.length; i++)\n\t\t\t\t{\n\t\t\t\t\tinfoArray[i].timestamp = Time.createFromTimestamp(infoArray[i].timestamp._timestamp);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\tcb(e, null);\n\t\t\t}\n\n\t\t\tcb(null, infoArray);\n\t\t}\n\t});\n};\n\n\nmodule.exports = MotionLog;\n"],"sourceRoot":"/source/"}